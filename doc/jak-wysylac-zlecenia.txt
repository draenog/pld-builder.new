W katalogu client jest skrypt nazywaj±cy siê make-request.sh. Odpalamy go
bez argumentów po czym zagl±damy do pliku ~/.requestrc. Najlepszy bêdzie
przyk³ad wiêc poni¿ej ustawienia, które trzeba zmieniæ:

  requester=mmazur
  default_key=mmazur@kernel.pl

Przy czym:

  [mmazur@home mmazur]$ gpg --list-secret-keys|grep '@'
  sec  1024D/A1490DA4 2003-08-14 Mariusz Mazur <mmazur@kernel.pl>

Mam nadziejê, ¿e teraz jest jasne sk±d siê ten email bierze.

Na razie obowi±zuj±cymi ustawieniami s±:

  build_mode=ready
  f_upgrade=yes

Po wyrównaniu ilo¶ci pakietów na ftpie z tym co jest w Ra przechodzimy na
ustawienia:

  build_mode=test
  f_upgrade=no

Ale tym na razie nie trzeba siê martwiæ, bo gdy przyjdzie czas, to bêdê
o tym tr±bi³.

Teraz æwiczenia praktyczne:

  make-request.sh kernel.spec:LINUX_2_6
  make-request.sh qt.spec kadu.spec
  make-request.sh -b 'ac-i* ac-athlon' nasm.spec

Pierwszy przyk³ad to puszczenie zlecenia na pakiet kernel z brancha LINUX_2_6.
Drugi to puszczenie w jednym zleceniu qt i kadu, przy czym je¶li budowanie
qt siê wywróci, to automatyka nawet nie bêdzie próbowa³a budowaæ kadu.
Ostatni przyk³ad to puszczenie nasma tylko i wy³±cznie na buildery x86
(ac-i* rozwija siê na to samo, co ac-i?86). Zwracam uwagê, ¿e przy
listowaniu tych buidlerów trzeba je wycytowaæ, ¿eby sz³y jako jeden
argument.

Ka¿dy dostaje mailem informacje o zleceniach które wysy³a (przy czym maile
z tymi informacjami przychodz± nie na adres w ~/.requestrc, ale na adres
zdefiniowany w konfigach buildera, wiêc sugerowa³bym wybieranie aliasa
@pld-linux.org, ¿eby móc to samemu zmieniaæ, bez konieczno¶ci interwencji
kogo¶ z bezpo¶rednim dostêpem do odpowiedniego buildera). Je¶li chcesz byæ
informowany o wszystkich zleceniach, to musisz siê zapisaæ na listê
pld-logs-builder@pld-linux.org i/lub ¶ledziæ co siê dzieje na
http://www.kernel.pl/~buildsrc/queue.html

Poniewa¿ póki co domy¶lnie pakiety l±duj± w katalogu ready na ftpie i po
zbudowaniu nowe wersje s± automatycznie upgrejdowane na builderze, wiêc
przez pewien czas pewnie przydatne bêdzie poni¿sze wywo³anie:

  make-request.sh -t nasm.spec

Skutek bêdzie taki, ¿e pakiet siê zbuduje, ale nie zostanie automatycznie
zupgrejdowany na builderach, a zamiast w ready wyl±duje w test (póki co
cieciwa u¿ywa tego do budowania sobie w spokoju jajek 2.6).

Zasady puszczania do Ac:

- Puszczamy zawsze z HEAD i bez bcondów. Odstêpstwa od tej zasady s±
  akceptowalne tylko i wy³±cznie w dobrze uzasadnionych przypadkach. HEAD ma
  na celu ³atwiejsz± orientacjê w zawarto¶ci ftpa. Natomiast brak bcondów jest
  wedle zasady "src.rpm ma siê budowaæ w ¶rodowisku, jakie jest dostêpne na
  ftpie (wyj±tek to oczywi¶cie java) i nie oczekujmy wiedzy tajemnej (jakiego
  bconda u¿yæ) od wszystkich, którzy chc± dany pakiet zbudowaæ".

- Ja tego nie powiedzia³em: w chwili obecnej nie jest ustawiona blokada na
  puszczanie pakietów o tej samej rel mimo zmiany np. speca. S³u¿y to
  ³atwiejszemu poprawianiu pakietów na okoliczno¶æ nie budowania siê na
  niektórych arch (tzn. póki pakiet le¿y w ready to spokojnie mo¿na mu dodaæ
  jeszcze parê poprawek i pu¶ciæ na brakuj±ce arch nie podbijaj±c rel). W
  pierwszej kolejno¶ci do g³ównego drzewka przenoszê pakiety buduj±ce siê na
  wszystkich arch, tak¿e ma siê zawsze ten dzieñ-dwa na powiedzenie mi, cobym
  siê wstrzyma³ (lub poprawienie). Ten 'workaround' zostanie utrzymany do
  osi±gniêcia oko³o 70-80% stanu pakietów z Ra, czyli jeszcze trochê. W ka¿dym
  razie nie nale¿y siê tym póki co martwiæ, bo jak przyjdzie pora, to bêdê
  tr±bi³ co siê zmienia i jak.


